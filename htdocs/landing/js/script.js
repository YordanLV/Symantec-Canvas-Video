!function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(t,n,r,o){var a=this;a.now=e("performance-now"),a.lastFrame=null,a.canvas=t,a.window=n,a.buttons=r,a.scroll=0,a.targetScroll=0,a.scrollDivisor=1e3,a.buttonLabelImage=document.createElement("img"),a.buttonLabelImage.src="images/ui/label-top.png",a.backgroundTimeout=null,a.dragStart=0,a.dragScrollStart=0,a.dragMultiplier=.005,a.isVisible=!1,a.navigateCallback=o,a.mouse={pending:{}},a.canClick=!1,a.canDrag=!1,a.isDragging=!1,a.floatOffset=0,a.initiateCanvas(),a.startAnimating()}e("requestAnimationFrame"),r.prototype.startAnimating=function(){var e=this;!function t(){var n,r=e.now()/1e3;null===e.lastFrame?(e.lastFrame=r,n=.06):(n=r-e.lastFrame,e.lastFrame=r),n>1.2&&(n=1.2),e.isVisible&&(e.update(n),e.render()),e.window.requestAnimationFrame(t)}()},r.prototype.initiateCanvas=function(){var e=this;e.updateCanvas(),e.window.addEventListener("resize",function(){e.updateCanvas()}),e.buttons.forEach(function(e){e.iconImage=document.createElement("img"),e.iconImage.src=e.icon}),e.canvas.addEventListener("mouseenter",function(t){e.mouseUpdate(t,!0)}),e.canvas.addEventListener("mousemove",function(t){e.mouseUpdate(t,!0)}),e.canvas.addEventListener("mousedown",function(t){e.mouseUpdate(t,!0)}),e.canvas.addEventListener("mouseup",function(t){e.mouseUpdate(t,!0)}),e.canvas.addEventListener("mouseleave",function(t){e.mouseUpdate(t,!1)})},r.prototype.updateCanvas=function(){var e=this;e.canvas.position=e.canvas.getBoundingClientRect()},r.prototype.setVisible=function(e,t){var n=this;n.isVisible=e,e?(n.canvas.classList.remove("inactive"),t?(n.canvas.classList.add("solid-background"),n.scroll=n.targetScroll-6,n.scrollDivisor=3e3):n.canvas.classList.remove("solid-background")):(n.canvas.classList.add("inactive"),null!==n.backgroundTimeout&&clearTimeout(n.backgroundTimeout),setTimeout(function(){n.canvas.classList.remove("solid-background")},1500))},r.prototype.mouseSetCursor=function(e){var t=this;t.canvas.style.cursor=e},r.prototype.mouseSetCanDrag=function(){var e=this;e.canDrag||(e.canDrag=!0,e.canClick=!1,e.mouseSetCursor("ew-resize"))},r.prototype.mouseSetCanClick=function(){var e=this;e.canClick||(e.canClick=!0,e.canDrag=!1,e.mouseSetCursor("pointer"))},r.prototype.mouseUpdate=function(e,t){var n=this;n.mouse.pending.x=(e.clientX-n.canvas.position.left)/n.canvas.clientWidth*1920,n.mouse.pending.y=(e.clientY-n.canvas.position.top)/n.canvas.clientHeight*1080,n.mouse.pending.left=1===(1&e.buttons),n.mouse.pending.right=2===(2&e.buttons),n.mouse.pending.middle=4===(4&e.buttons),n.mouse.pending.back=8===(8&e.buttons),n.mouse.pending.forward=16===(16&e.buttons),n.mouse.pending.isActive=t},r.prototype.mouseClear=function(){var e=this;e.mouse.x=e.mouse.pending.x,e.mouse.y=e.mouse.pending.y,e.mouse.left=e.mouse.pending.left,e.mouse.right=e.mouse.pending.right,e.mouse.middle=e.mouse.pending.middle,e.mouse.back=e.mouse.pending.back,e.mouse.forward=e.mouse.pending.forward,e.mouse.isActive=e.mouse.pending.isActive},r.prototype.update=function(e){var t,n=this;return n.updateCanvas(),n.scroll+=(n.targetScroll-n.scroll)/(e*n.scrollDivisor),Math.abs(n.mouse.x-960)<275&&Math.abs(n.mouse.y-540)<275&&!n.isDragging?n.mouseSetCanClick():n.mouseSetCanDrag(),n.mouse.left&&!n.mouse.pending.left&&n.canClick&&n.setVideo(Math.round(n.scroll)),n.isDragging&&(n.scrollDivisor=1e3,n.mouse.left&&n.mouse.pending.left?(t=n.mouse.x-n.dragStart,n.scroll=n.dragScrollStart-t*n.dragMultiplier,n.targetScroll=n.scroll):(n.targetScroll=Math.round(n.targetScroll),n.isDragging=!1)),!n.mouse.left&&n.mouse.pending.left&&n.canDrag&&(n.isDragging=!0,n.dragStart=n.mouse.x,n.dragScrollStart=n.scroll),n.wrapScroll(),n.floatOffset+=e/2,n.floatOffset>Math.PI&&(n.floatOffset-=2*Math.PI),n.mouseClear(),e},r.prototype.setVideo=function(e){var t=this;t.targetScroll=e,t.navigateCallback&&t.navigateCallback(t.buttons[Math.round(t.targetScroll)])},r.prototype.wrapScroll=function(){for(var e=this,t=e.buttons.length;e.targetScroll<=0;)e.targetScroll+=t,e.scroll+=t;for(;e.targetScroll>=t;)e.targetScroll-=t,e.scroll-=t},r.prototype.render=function(){var e=this,t=this.canvas.getContext("2d");t.clearRect(0,0,e.canvas.width,e.canvas.height),t.save(),e.renderButtons(t,e.buttons),e.renderTarget(t),t.restore()},r.prototype.renderButtons=function(e,t){var n,r,o,a,i,s,c,u,l,d,m,f,g=this;for(o=g.scroll/g.buttons.length,e.save(),e.translate(g.canvas.width/2,g.canvas.height/2),r=Math.min(g.canvas.width,g.canvas.height)/2,e.scale(r,r),n=0;n<t.length;n+=1)e.save(),s=n/g.buttons.length,a=s*-1-.5,u=1.6*Math.sin((o+a)*Math.PI*2),l=.3*(-Math.cos((o+a)*Math.PI*2)-1),c=.2+(-Math.cos((o+a)*Math.PI*2)+1)/3.5,m=(-Math.cos((o+a)*Math.PI*2)+1)/2,f=Math.pow(m,100),d=Math.sin(g.floatOffset+8*Math.PI*s)/40,e.globalAlpha=m,e.translate(u,l),e.scale(c,c),i=t[n],g.renderButton(e,i,d,f),e.restore();e.restore()},r.prototype.renderButton=function(e,t,n,r){var o,a=this;e.save(),e.translate(0,n),e.drawImage(t.iconImage,-.325,-.325,.55,.55),e.restore(),r<.001||(e.globalAlpha=r,e.scale(.005,.005),e.font="20px Arial",e.textAlign="center",o=e.measureText(t.title).width+40,e.fillStyle="#1b4e80",e.fillRect(-11.5-o/2,175,o,35),e.drawImage(a.buttonLabelImage,-23.5,164.4,24,10.6),e.fillStyle="#fbc22d",e.fillText(t.title,-11.5,200),e.font="28px Open Sans",e.textAlign="center",e.fillStyle="#466fd3",e.fillText(t.category,-9.8,-175))},r.prototype.renderTarget=function(e){var t=this,n=.275*Math.min(t.canvas.width,t.canvas.height);e.save(),e.translate(t.canvas.width/2,t.canvas.height/2),e.scale(n,n),e.lineWidth=.001*n,e.beginPath(),t.renderTargetArc(e,.05),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.stroke(),e.beginPath(),t.renderTargetArc(e,0),e.strokeStyle="#fbc22d",e.stroke(),e.restore()},r.prototype.renderTargetArc=function(e,t){e.arc(t-.089,t-.02,.9,0,2*Math.PI)},t.exports=r},{"performance-now":3,requestAnimationFrame:5}],2:[function(e,t,n){"use strict";function r(e,t){var n;return e.preventDefault(),n=parseInt(t.getAttribute("data-video"),10),i.setVideo(n),!1}function o(e){return r(e,this)}function a(e){i.setVisible(!1),s.setAttribute("controls",!0),s.src=e.video.mp4,s.load()}var i,s=document.querySelector("article.video > video"),c=document.querySelector('[data-action="show-navigation"]'),u=document.querySelector("a.logo-link"),l=document.querySelector("article.carousel-selector"),d=document.querySelectorAll("article.carousel-selector > a");s.addEventListener("ended",function(){i.setVisible(!0,!0),s.removeAttribute("controls")}),c.addEventListener("click",function(){i.isVisible?(i.setVisible(!1),s.setAttribute("controls",!0),s.play()):(i.setVisible(!0),s.removeAttribute("controls"),s.pause())}),u.addEventListener("click",function(e){return e.preventDefault(),location.reload(),!1});var m;for(m=0;m<d.length;m+=1)d[m].addEventListener("click",o);var f;window.setMedia=function(e){e&&f!==!0?(f=!0,c.style.display="none",u.style.display="none",l.style.display=""):e||f===!1||(f=!1,c.style.display="",u.style.display="",l.style.display="none")},i=new(e("./Carousel"))(document.querySelector("article.video > canvas"),window,EMS.carouselVideos,a),window.setMedia(!1),window.parent.videoLoaded()},{"./Carousel":1}],3:[function(e,t,n){(function(e){(function(){var n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},o=n()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:4}],4:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function i(e){if(m===clearTimeout)return clearTimeout(e);if((m===o||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{return m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}function s(){v&&g&&(v=!1,g.length?p=g.concat(p):h=-1,p.length&&c())}function c(){if(!v){var e=a(s);v=!0;for(var t=p.length;t;){for(g=p,p=[];++h<t;)g&&g[h].run();h=-1,t=p.length}g=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var d,m,f=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{m="function"==typeof clearTimeout?clearTimeout:o}catch(e){m=o}}();var g,p=[],v=!1,h=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||a(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],5:[function(e,t,n){!function(e){!function(){if(!e.requestAnimationFrame){e.webkitRequestAnimationFrame&&(e.requestAnimationFrame=e.webkitRequestAnimationFrame,e.cancelAnimationFrame=e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame);var t=0;e.requestAnimationFrame=function(n){var r=(new Date).getTime(),o=Math.max(0,16-(r-t)),a=e.setTimeout(function(){n(r+o)},o);return t=r+o,a},e.cancelAnimationFrame=function(e){clearTimeout(e)}}}(),"function"==typeof define&&define(function(){return e.requestAnimationFrame})}(window)},{}]},{},[2]);
//# sourceMappingURL=script.js.map
